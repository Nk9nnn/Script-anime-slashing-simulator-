-- UPDATED AutoBoss Script without hatching and with respawn-check

--// ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å
loadstring(game:HttpGet("https://raw.githubusercontent.com/Allanursulino/fight.lua/refs/heads/main/AnimeFight.lua"))()
print("‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå")

--// ‚ö° SETTINGS ‚ö°
local Settings = {
    AutoBoss = true,
}

--// ‚ö° SERVICES ‚ö°
local RS = game:GetService("ReplicatedStorage")
local Bridge = RS:WaitForChild("Remotes"):WaitForChild("Bridge")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

--// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÑ‡∏î‡πâ HumanoidRootPart
local function getHRP()
    local char = player.Character or player.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end
local HRP = getHRP()
player.CharacterAdded:Connect(function(c)
    HRP = c:WaitForChild("HumanoidRootPart")
end)

--// ‚ö° LIST ‡∏ö‡∏≠‡∏™
local BossList = {
    ["Magelen"] = "Pirate Island",
    ["Dome"] = "Slayer Village",
    ["BlackFrieza"] = "Dragon Town",
    ["KesameAkat"] = "Leaf Village",
    ["ItacheAkat"] = "Leaf Village",
}

--// ‚ö° DATA PROCESSING
local BossData = {}
local BossPriority = {}
local FirstBossWorld = nil

local starsFolder = workspace:WaitForChild("Server"):WaitForChild("Stars")
local enemiesFolder = workspace:WaitForChild("Server"):WaitForChild("Enemies")

for bossName, worldName in pairs(BossList) do
    if not FirstBossWorld then FirstBossWorld = worldName end

    local baseModel = starsFolder:WaitForChild(worldName)
    local enemyFolder = enemiesFolder:WaitForChild(worldName)

    if baseModel and baseModel:IsA("Model") and not baseModel.PrimaryPart then
        local firstPart = baseModel:FindFirstChildWhichIsA("BasePart")
        if firstPart then
            baseModel.PrimaryPart = firstPart
        end
    end

    BossData[bossName] = {World = worldName, Base = baseModel, EnemyFolder = enemyFolder}
    table.insert(BossPriority, bossName)
end

--// ‚≠ê ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏õ‡πÑ‡∏õ‡∏ê‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å
local function TPToBase(baseModel)
    if baseModel and baseModel.PrimaryPart then
        HRP.CFrame = baseModel.PrimaryPart.CFrame + Vector3.new(0,5,0)
        task.wait(0.5)
    end
end

--// ‚≠ê ‡∏ß‡∏≤‡∏õ‡πÑ‡∏õ‡πÇ‡∏•‡∏Å
local function TPWorld(worldName)
    Bridge:FireServer("General","Teleport","Teleport",worldName)
    task.wait(2)
end

--// ‚≠ê ‡πÄ‡∏ä‡πá‡∏Ñ‡πÇ‡∏•‡∏Å‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
local lastWorldCheck = 0
local cachedWorld = nil
local function GetCurrentWorld()
    if tick() - lastWorldCheck < 5 and cachedWorld ~= nil then
        return cachedWorld
    end
    lastWorldCheck = tick()

    local closestWorld = nil
    local closestDist = math.huge
    local myPos = HRP.Position

    for _, data in pairs(BossData) do
        local base = data.Base
        if base and base.PrimaryPart then
            local dist = (myPos - base.PrimaryPart.Position).Magnitude
            if dist < closestDist then
                closestDist = dist
                closestWorld = data.World
            end
        end
    end

    cachedWorld = closestWorld
    return cachedWorld
end
        end
    end

    return closestWorld
end

--// ‚≠ê MAIN AutoBoss LOOP
spawn(function()
    while task.wait(0.5) do
        if not Settings.AutoBoss then continue end

        local currentWorld = GetCurrentWorld()

        if not currentWorld then
            TPWorld(FirstBossWorld)
            TPToBase(BossData[BossPriority[1]].Base)
            continue
        end

        for _, info in pairs(BossData) do
            if info.World == currentWorld then
                TPToBase(info.Base)
                break
            end
        end

        local TargetBoss, BossInfo, BossPart = nil, nil, nil
        for _, name in ipairs(BossPriority) do
            local info = BossData[name]
            local part = info.EnemyFolder:FindFirstChild(name)
            if part and part:IsA("BasePart") then
                TargetBoss = name
                BossInfo = info
                BossPart = part
                break
            end
        end

        if not TargetBoss then
            TPWorld(FirstBossWorld)
            TPToBase(BossData[BossPriority[1]].Base)
            continue
        end

        task.wait(1.5)

        currentWorld = GetCurrentWorld()
        if currentWorld ~= BossInfo.World then
            TPWorld(BossInfo.World)
            task.wait(1)

            -- üìå Anti-Stuck ‡∏ï‡∏£‡∏ß‡∏à‡∏ã‡πâ‡∏≥‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏≤‡∏õ
            local recheckWorld = GetCurrentWorld()
            if recheckWorld ~= BossInfo.World then
                -- ‡∏ß‡∏≤‡∏õ‡∏ã‡πâ‡∏≥‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                TPWorld(BossInfo.World)
                task.wait(1)

                -- ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ‚Üí Reset ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÅ‡∏Å‡πâ‡∏ö‡∏±‡∏Ñ
                recheckWorld = GetCurrentWorld()
                if recheckWorld ~= BossInfo.World then
                    player.Character:BreakJoints() -- Reset
                    task.wait(3)
                end
            end

            continue
        end
        end

        if BossPart then
            local front = BossPart.CFrame.LookVector * 5
            HRP.CFrame = BossPart.CFrame + Vector3.new(0,5,0) + front
            task.wait(0.3)

            if (HRP.Position - BossPart.Position).Magnitude > 15 then
                player.Character:BreakJoints()
                task.wait(3)
                continue
            end
        end

        repeat task.wait(0.2)
        until not BossInfo.EnemyFolder:FindFirstChild(TargetBoss)

        TPWorld(FirstBossWorld)
        TPToBase(BossData[BossPriority[1]].Base)
    end
end)

--// ‚≠ê ReEquip LOOP
spawn(function()
    while true do
        Bridge:FireServer("General","Fighters","Unequip_All")
        task.wait(0.5)
        Bridge:FireServer("General","Fighters","Equip_Best")
        task.wait(70)
    end
end)

--// ‚≠ê Auto Buy Trial Merchant
spawn(function()
    while true do
        Bridge:FireServer("General","Trial_Merchant","Buy","Slot4")
        task.wait(2)
    end
end)

--// ‚≠ê Auto Reroll Types
spawn(function()
    local types = {"Clans","Races","Breathings","Haki","Ki","Fruits"}
    while true do
        for _, t in ipairs(types) do
            Bridge:FireServer("General", t, "Reroll")
        end
        task.wait(0.25)
    end
end)

print("‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß ‚úîÔ∏è")
